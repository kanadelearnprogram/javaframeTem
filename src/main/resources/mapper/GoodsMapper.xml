<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kanade.temp.mapper.GoodsMapper">

    <resultMap id="GoodsResultMap" type="com.kanade.temp.entity.Goods">
        <id property="goodsId" column="goods_id"/>
        <result property="goodsName" column="goods_name"/>
        <result property="price" column="price"/>
        <result property="createTime" column="create_time"/>
        <result property="imgPath" column="img_path"/>
        <result property="typeId" column="type_id"/>
        <result property="typeName" column="type_name"/>
    </resultMap>

    <select id="selectByLikeName" parameterType="map" resultMap="GoodsResultMap">
        SELECT g.*, t.type_name
        FROM goods g
        LEFT JOIN goods_type t ON g.type_id = t.type_id
        <where>
            <if test="goodsName != null and goodsName != ''">
                g.goods_name LIKE CONCAT('%', #{goodsName}, '%')
            </if>
        </where>
        ORDER BY g.create_time DESC
        <if test="offset != null and limit != null">
            LIMIT #{offset}, #{limit}
        </if>
    </select>

</mapper>